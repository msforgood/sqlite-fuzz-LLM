# SQLite3 Vulnerability Exploits

이 디렉토리는 SQLite3 v3.51.0에서 식별된 취약점들을 실제로 exploit하는 코드와 입력값을 포함합니다.

## ⚠️ 중요한 보안 주의사항

**이 코드들은 오직 방어적 보안 목적으로만 사용되어야 합니다:**
- 취약점 분석 및 이해
- 보안 패치 검증
- 방어 메커니즘 테스트
- 보안 연구 및 교육

**악의적 사용 금지**: 이 코드들을 악의적인 목적으로 사용하는 것은 엄격히 금지됩니다.

## 디렉토리 구조

```
exploit/
├── src/                    # Exploit 소스코드
│   ├── btree_overflow_exploit.c
│   ├── vdbe_uaf_exploit.c
│   ├── format_string_exploit.c
│   └── wal_race_exploit.c
├── inputs/                 # 악성 입력 데이터
│   ├── malicious_db/
│   ├── overflow_payloads/
│   └── format_strings/
├── scripts/                # 빌드 및 실행 스크립트
│   ├── build_exploits.sh
│   └── run_exploits.sh
└── results/                # 실행 결과 및 분석
```

## 타겟 취약점

1. **B-Tree Integer Overflow** (btree.c:6475)
   - `allocateBtreePage` 함수의 정수 오버플로우
   - 대용량 freelist 조작을 통한 메모리 손상

2. **VDBE Memory UAF** (vdbemem.c:283)
   - `sqlite3VdbeMemMakeWriteable` Use-After-Free
   - 메모리 재할당 중 dangling pointer 활용

3. **Format String Attack**
   - `sqlite3_mprintf` 함수의 포맷 문자열 취약점
   - 메모리 읽기/쓰기 및 코드 실행

4. **WAL Race Condition** (btree.c:11296)
   - `sqlite3BtreeCheckpoint` TOCTOU 취약점
   - 멀티스레드 환경에서의 레이스 컨디션

## 사용법

```bash
# 모든 exploit 빌드
./scripts/build_exploits.sh

# 개별 exploit 실행
./scripts/run_exploits.sh btree_overflow
./scripts/run_exploits.sh vdbe_uaf
./scripts/run_exploits.sh format_string
./scripts/run_exploits.sh wal_race

# 전체 exploit 테스트
./scripts/run_exploits.sh all
```

## 주의사항

- 이 exploit들은 제어된 환경에서만 실행하세요
- ASLR, DEP 등 보안 기능이 활성화된 시스템에서는 제한적일 수 있습니다
- 실제 공격에 사용하지 마세요 - 방어적 목적으로만 사용하세요