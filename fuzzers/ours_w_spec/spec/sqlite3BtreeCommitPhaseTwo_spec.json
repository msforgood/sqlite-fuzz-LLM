{
  "target": { 
    "function": "sqlite3BtreeCommitPhaseTwo",
    "fc": "btree_003",
    "category": "B-Tree",
    "subcategory": "Transaction Management",
    "description": "Critical transaction commit phase two - finalizes transaction commit"
  },
  "struct_spec": {
    "commit_phase_two_input": {
      "btree_flags": "uint8_t",
      "cleanup_mode": "uint8_t", 
      "error_injection": "uint8_t",
      "operation_flags": "uint8_t",
      "test_data": "uint8_t[12]",
      "description": "Phase two commit operation with cleanup and error scenarios"
    }
  },
  "validation_spec": {
    "memory_align": 8,
    "cleanup_mode_range": {"min": 0, "max": 3},
    "btree_flags_range": {"min": 0, "max": 255},
    "error_injection_range": {"min": 0, "max": 15}
  },
  "fc_mapping": {
    "source": "btree.c:4374",
    "rationale": "sqlite3BtreeCommitPhaseTwo - Critical transaction finalization function",
    "api_level": "internal",
    "complexity": "high",
    "call_frequency": "medium"
  },
  "constraints": {
    "max_input_size": 16,
    "min_input_size": 16,
    "endianness": "LE",
    "sqlite_version": "3.51.0",
    "requires_initialization": true
  },
  "notes": {
    "preconditions": [
      "sqlite3_initialize() called",
      "Valid Btree object created",
      "Transaction in commit phase one state"
    ],
    "side_effects": [
      "Transaction finalized or rolled back",
      "Database pages synced to disk", 
      "Lock state changes",
      "WAL checkpoint operations"
    ],
    "error_conditions": [
      "SQLITE_CORRUPT: Database corruption during commit",
      "SQLITE_IOERR: I/O error during sync",
      "SQLITE_NOMEM: Out of memory",
      "SQLITE_BUSY: Database locked"
    ],
    "fuzzing_strategy": [
      "Transaction state manipulation",
      "Error injection during commit finalization", 
      "Cleanup mode variations",
      "WAL vs rollback journal scenarios"
    ]
  }
}