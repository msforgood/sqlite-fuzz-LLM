{
  "target": { 
    "function": "pagerBeginReadTransaction",
    "fc": "pager_002",
    "category": "Storage",
    "subcategory": "Page Management",
    "file": "pager.c",
    "line": 3244
  },
  "struct_spec": {
    "pager": {
      "pWal": "Wal*",
      "eState": "u8",
      "eLock": "u8",
      "changeCountDone": "u8",
      "tempFile": "u8",
      "readOnly": "u8",
      "dbSize": "Pgno",
      "dbOrigSize": "Pgno",
      "dbFileSize": "Pgno",
      "mxPgno": "Pgno"
    },
    "wal": {
      "pDbFd": "sqlite3_file*",
      "pWalFd": "sqlite3_file*",
      "iCallback": "u32",
      "mxWalSize": "i64",
      "nWiData": "int",
      "szFirstBlock": "int",
      "readLock": "int",
      "lockState": "u8"
    },
    "transaction_params": {
      "beginFlags": "int",
      "walEndOffset": "i64",
      "changeCounter": "u32",
      "readMark": "int"
    }
  },
  "validation_spec": {
    "wal_enabled": true,
    "pager_state": ["PAGER_OPEN", "PAGER_READER"],
    "lock_level": ["SHARED_LOCK", "RESERVED_LOCK"],
    "wal_size": {"min": 0, "max": 1073741824},
    "read_mark": {"min": -1, "max": 4},
    "change_counter": {"min": 0, "max": 4294967295}
  },
  "fc_mapping": {
    "source": "pager.c:3244",
    "rationale": "pagerBeginReadTransaction - WAL read transaction initialization",
    "api_level": "internal"
  },
  "constraints": {
    "max_input_size": 2048,
    "min_input_size": 24,
    "endianness": "LE",
    "sqlite_version": "3.51.0",
    "requires_initialization": true
  },
  "notes": {
    "preconditions": [
      "sqlite3_initialize() called",
      "WAL mode enabled on pager",
      "Pager in OPEN or READER state",
      "Shared lock or higher acquired"
    ],
    "side_effects": [
      "WAL read transaction started",
      "Read mark acquired",
      "Change counter validated",
      "Database size updated"
    ],
    "error_conditions": [
      "SQLITE_BUSY: Cannot acquire read mark",
      "SQLITE_IOERR: WAL I/O error",
      "SQLITE_CORRUPT: WAL corruption detected",
      "SQLITE_PROTOCOL: Lock protocol violation"
    ]
  }
}